<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Déclarations – Laboratoire</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg:#f5f5f8; --card:#fff; --accent:#2c7be5;
      --accent-soft:#e1ecff; --text:#222; --muted:#666; --border:#ddd;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui;background:var(--bg);color:var(--text)}
    .page{max-width:900px;margin:32px auto;padding:0 16px}
    h1{margin:0 0 6px;font-size:1.7rem}
    .subtitle{color:var(--muted);font-size:.95rem}

    .switcher{display:flex;gap:8px;margin:24px 0}
    .switcher button{
      flex:1;border-radius:999px;border:1px solid var(--border);
      background:#fff;padding:10px;font-size:.95rem;cursor:pointer
    }
    .switcher button.active{background:var(--accent-soft);border-color:var(--accent)}

    form{background:var(--card);padding:18px;border-radius:10px;border:1px solid var(--border)}
    label{display:block;margin-bottom:10px;font-weight:600;font-size:.9rem}
    label span{display:block;margin-bottom:3px}
    input,select,textarea{
      width:100%;padding:8px;border-radius:6px;border:1px solid var(--border)
    }
    textarea{resize:vertical}
    .two-cols{display:grid;grid-template-columns:1fr 1fr;gap:10px 16px}
    .status{margin-top:6px;font-size:.85rem}
    .ok{color:#1b7c3a}.err{color:#b32020}

    .authors-title{font-weight:700;margin-top:10px}
    .author-row{border:1px solid var(--border);border-radius:8px;padding:10px;margin-bottom:8px}
    .btn-secondary{border-radius:999px;border:1px solid var(--border);background:#fff;padding:6px 12px;cursor:pointer}
  </style>
</head>

<body>
<div class="page">

<header>
  <h1>Déclarations du laboratoire</h1>
  <p class="subtitle">Les données sont envoyées automatiquement dans Zotero.</p>
</header>

<div class="switcher">
  <button class="active">Nouvelle publication</button>
</div>

<form id="pub-form">

  <label>
    <span>Type de publication *</span>
    <select name="pubType" id="pubType">
      <option value="book">Livre</option>
      <option value="bookSection">Chapitre d’ouvrage</option>
    </select>
  </label>

  <label>
    <span>Title *</span>
    <input name="title" required>
  </label>

  <div class="authors-title">Author(s) *</div>
  <div id="authors-list"></div>
  <button type="button" id="add-author-btn" class="btn-secondary">+ Ajouter un auteur</button>

  <!-- ====== CHAMPS LIVRE ====== -->
  <div id="book-fields">

    <div class="two-cols">
      <label><span>Date *</span><input name="date"></label>
      <label><span>Language</span><input name="language"></label>
    </div>

    <div class="two-cols">
      <label><span>Publisher *</span><input name="publisher"></label>
      <label><span>Place *</span><input name="place"></label>
    </div>

    <label><span>ISBN</span><input name="isbn"></label>
    <label><span>Abstract</span><textarea name="abstract"></textarea></label>

  </div>

  <!-- ====== CHAMPS CHAPITRE ====== -->
  <div id="section-fields" style="display:none">

    <label><span>Book Title *</span><input name="bookTitle"></label>

    <div class="two-cols">
      <label><span>Pages</span><input name="pages" placeholder="123–145"></label>
      <label><span>Edition</span><input name="edition"></label>
    </div>

    <div class="two-cols">
      <label><span>Series</span><input name="series"></label>
      <label><span>Series Number</span><input name="seriesNumber"></label>
    </div>

    <div class="two-cols">
      <label><span>Volume</span><input name="volume"></label>
      <label><span>Date *</span><input name="date"></label>
    </div>

    <div class="two-cols">
      <label><span>Publisher *</span><input name="publisher"></label>
      <label><span>Place *</span><input name="place"></label>
    </div>

    <label><span>ISBN</span><input name="isbn"></label>

  </div>

  <label>
    <span>Extra</span>
    <textarea name="extra"></textarea>
  </label>

  <button type="submit">Envoyer vers Zotero</button>
  <p id="pub-status" class="status"></p>

</form>
</div>

<script src="assets/app.js"></script>
</body>
</html>
