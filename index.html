<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>DÃ©clarations â€“ Laboratoire</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg:#f5f5f8; --card:#fff; --accent:#2c7be5;
      --accent-soft:#e1ecff; --text:#222; --muted:#666; --border:#ddd;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui;background:var(--bg);color:var(--text)}
    .page{max-width:900px;margin:32px auto;padding:0 16px}

    header{margin-bottom:18px}
    h1{margin:0 0 6px;font-size:1.7rem;font-weight:650}
    .subtitle{margin:0;color:var(--muted);font-size:.95rem}

    form{
      background:var(--card);
      padding:18px;
      border-radius:10px;
      border:1px solid var(--border);
    }
    label{
      display:block;
      margin:0 0 10px;
      font-weight:600;
      font-size:.9rem;
    }
    label span{display:block;margin:0 0 3px}
    input,select,textarea{
      width:100%;
      padding:8px;
      border-radius:6px;
      border:1px solid var(--border);
      font:inherit;
      background:#fff;
    }
    textarea{resize:vertical}

    .two-cols{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:10px 16px;
    }

    .switcher{
      display:flex;
      gap:10px;
      margin-bottom:14px;
      flex-wrap:wrap;
    }
    .switcher button{
      border-radius:999px;
      border:1px solid var(--border);
      background:#fff;
      padding:8px 12px;
      cursor:pointer;
      font-weight:650;
    }
    .switcher button.active{
      border-color:var(--accent);
      background:var(--accent-soft);
    }

    .hidden{display:none}

    .checks{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:6px;
    }
    .check{
      display:inline-flex;
      gap:8px;
      align-items:center;
      border:1px solid var(--border);
      border-radius:999px;
      padding:7px 10px;
      background:#fff;
      font-weight:600;
      font-size:.85rem;
      cursor:pointer;
      user-select:none;
    }
    .check input{
      width:16px;height:16px;
      margin:0;
    }

    footer{margin-top:18px;color:var(--muted);font-size:.8rem}
  </style>
</head>

<body>
  <div class="page">
    <header>
  <h1>DÃ©clarations du laboratoire</h1>
  <p class="subtitle">Les donnÃ©es sont envoyÃ©es automatiquement dans Zotero.</p>

  <p style="margin-top:8px;font-size:.9rem">
    ðŸ“Š
    <a href="/suivi.html" target="_blank" rel="noopener noreferrer"
       style="color:var(--accent);text-decoration:none;font-weight:600">
      Voir le suivi public des demandes (HAL & communication)
    </a>
  </p>

  <p style="margin-top:6px;font-size:.9rem">
    ðŸ§¾
    <a href="/cv.html" target="_blank" rel="noopener noreferrer"
       style="color:var(--accent);text-decoration:none;font-weight:600">
      GÃ©nÃ©rateur de CV (Ã  partir des publications Zotero)
    </a>
  </p>
<p style="margin-top:6px;font-size:.9rem">
  ðŸ“¥
  <a href="/import.html"
     style="color:var(--accent);text-decoration:none;font-weight:600">
    Import par lot (CSV HAL â†’ Zotero)
  </a>
</p>
  <p style="margin-top:6px;font-size:.9rem">
    ðŸŽ¤
    <a href="/conference.html"
       style="color:var(--accent);text-decoration:none;font-weight:600">
      DÃ©clarer une communication (Conference Paper)
    </a>
  </p>


</header>


    <div class="switcher">
      <button type="button" class="active">Nouvelle publication</button>
    </div>

    <form id="publication-form">
      <!-- Type -->
      <label>
        <span>Type de publication *</span>
        <select id="pubType" name="pubType" required>
          <option value="journalArticle">Article</option>
          <option value="bookSection">Chapitre d'ouvrage</option>
          <option value="book">Livre</option>
        </select>
      </label>

      <!-- Common -->
      <label>
        <span>Title *</span>
        <input name="title" required>
      </label>

      <div class="two-cols">
        <label>
          <span>PrÃ©nom auteur *</span>
          <input name="firstName" required>
        </label>
        <label>
          <span>Nom auteur *</span>
          <input name="lastName" required>
        </label>
      </div>

      <!-- Book fields -->
      <div id="book-fields" class="hidden">
        <div class="two-cols">
          <label>
            <span>Publisher</span>
            <input name="publisher">
          </label>
          <label>
            <span>Place</span>
            <input name="place">
          </label>
        </div>

        <div class="two-cols">
          <label>
            <span>Date</span>
            <input name="date" placeholder="2024 ou 2024-06-01">
          </label>
          <label>
            <span>ISBN</span>
            <input name="isbn">
          </label>
        </div>

        <label>
          <span>Language</span>
          <input name="language">
        </label>
      </div>

      <!-- Book section fields -->
      <div id="chapter-fields" class="hidden">
        <label>
          <span>Book Title *</span>
          <input name="bookTitle">
        </label>

        <div class="two-cols">
          <label>
            <span>Publisher</span>
            <input name="publisher_chapter">
          </label>
          <label>
            <span>Place</span>
            <input name="place_chapter">
          </label>
        </div>

        <div class="two-cols">
          <label>
            <span>Date</span>
            <input name="date_chapter" placeholder="2024 ou 2024-06-01">
          </label>
          <label>
            <span>Pages</span>
            <input name="pages">
          </label>
        </div>

        <div class="two-cols">
          <label>
            <span>ISBN</span>
            <input name="isbn_chapter">
          </label>
          <label>
            <span>Language</span>
            <input name="language_chapter">
          </label>
        </div>
      </div>

      <!-- Article fields -->
      <div id="article-fields" class="hidden">
        <label>
          <span>Journal *</span>
          <input name="publication">
        </label>

        <div class="two-cols">
          <label>
            <span>Date</span>
            <input name="date_article" placeholder="2024 ou 2024-06-01">
          </label>
          <label>
            <span>DOI</span>
            <input name="doi">
          </label>
        </div>

        <div class="two-cols">
          <label>
            <span>Volume</span>
            <input name="articleVolume">
          </label>
          <label>
            <span>Issue</span>
            <input name="articleIssue">
          </label>
        </div>

        <div class="two-cols">
          <label>
            <span>Pages</span>
            <input name="articlePages">
          </label>
          <label>
            <span>Language</span>
            <input name="language_article">
          </label>
        </div>
      </div>

      <hr style="border:0;border-top:1px solid var(--border);margin:14px 0">

      <label>
        <span>Souhaitez-vous la crÃ©ation dâ€™une notice sur HAL ? *</span>
        <select name="optHal" required>
          <option value="">â€”</option>
          <option value="yes">Oui</option>
          <option value="no">Non</option>
        </select>
      </label>

      <label>
        <span>Souhaitez-vous une communication (newsletter + rÃ©seaux sociaux) ? *</span>
        <select name="optComms" required>
          <option value="">â€”</option>
          <option value="yes">Oui</option>
          <option value="no">Non</option>
        </select>
      </label>

      <div style="margin-top:10px">
        <div style="font-weight:700;font-size:.9rem;margin:0 0 6px">
          Est-ce que votre publication/Ã©vÃ©nement est rattachÃ©e Ã  un axe thÃ©matique de recherche ?
        </div>
        <div class="checks">
          <label class="check"><input type="checkbox" name="axisPICMAP" value="PICMAP"> PICMAP</label>
          <label class="check"><input type="checkbox" name="axisMOPTIS" value="MOPTIS"> MOPTIS</label>
          <label class="check"><input type="checkbox" name="axisOCSO" value="OCSO"> OCSO</label>
        </div>
      </div>

      <label style="margin-top:12px">
        <span>Extra (texte libre)</span>
        <textarea name="extra" rows="4"></textarea>
      </label>

      <button type="submit"
              style="margin-top:10px;background:var(--accent);border:1px solid var(--accent);color:#fff;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:650">
        Envoyer vers Zotero
      </button>

      <div id="status"
           style="margin-top:12px;font-size:.92rem;color:var(--muted);white-space:pre-wrap"></div>
    </form>

    <footer>
      <p>Les informations envoyÃ©es sont stockÃ©es dans la bibliothÃ¨que Zotero du laboratoire.</p>
    </footer>
  </div>

  <script src="/assets/app.js"></script>
</body>
</html>
